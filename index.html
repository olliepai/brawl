<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title></title>
</head>

<body>
  <canvas id="canvas" width=1300 height=600 />
</body>

<script>
  var canvas = document.getElementById("canvas");
  var context = canvas.getContext("2d");

  document.addEventListener("keydown", keyDown);
  document.addEventListener("keyup", keyUp);

  var fighter = new Fighter();
  var challenger = new Fighter();

  setInterval(run, 1000/60);

  function run() {
    clearBackground();
    context.fillStyle = "#81f3f9";
    context.fillRect(0, 500, 1300, 10);
    fighter.physics();
    fighter.move();
    challenger.move();
    fighter.draw();
    challenger.draw();
  }

  function clearBackground() {
    context.fillStyle = "#f9653b";
    context.fillRect(0, 0, canvas.width, canvas.height);
  }

  function keyDown(event) {
    if (event.key == 'a' && fighter.direction != fighter.LEFT) {
      fighter.direction = fighter.LEFT;
    } else if (event.key == 'd' && fighter.direction != fighter.RIGHT) {
      fighter.direction = fighter.RIGHT;
    } else if (event.key == 'w') {
      fighter.jump();
    }

    if (event.key == 'j' && challenger.direction != challenger.LEFT) {
      challenger.direction = challenger.LEFT;
    } else if (event.key == 'l' && challenger.direction != challenger.RIGHT) {
      challenger.direction = challenger.RIGHT;
    } else if (event.key == 'i' && challenger.direction != challenger.UP) {
      challenger.direction = challenger.UP;
    } else if (event.key == 'k' && challenger.direction != challenger.DOWN) {
      challenger.direction = challenger.DOWN;
    }
  }

  function keyUp(event) {
    if (event.key == 'a' && fighter.direction == fighter.LEFT) {
      fighter.direction = fighter.STOP;
    } else if (event.key == 'd' && fighter.direction == fighter.RIGHT) {
      fighter.direction = fighter.STOP;
    } else if (event.key == 's' && fighter.direction == fighter.DOWN) {
      fighter.direction = fighter.STOP;
    }

    if (event.key == 'j' && challenger.direction == challenger.LEFT) {
      challenger.direction = challenger.STOP;
    } else if (event.key == 'l' && challenger.direction == challenger.RIGHT) {
      challenger.direction = challenger.STOP;
    } else if (event.key == 'i' && challenger.direction == challenger.UP) {
      challenger.direction = challenger.STOP;
    } else if (event.key == 'k' && challenger.direction == challenger.DOWN) {
      challenger.direction = challenger.STOP;
    }
  }

  function manageState() {

  }

  function Fighter() {
    this.x = 0;
    this.y = 0;

    this.direction;
    this.STILL = 0;
    this.LEFT = 1;
    this.RIGHT = 2;
    this.direction = this.STILL;

    this.speedX = 5;
    this.accelX = 0;
    this.speedY = 0;
    this.accelY = 0;
    this.gravity = .6;
	this.jumpSprite = new Image();
	this.jumpSprite.src = "RyuJump.png";
	
	this.totalImages = 20;
	this.currentSprite = 1;
	this.currentImagePos = 0;
	this.subImageWidth = 87;
	this.subImageHeight = 192;
	
    this.isJumping = false;

    this.move = function() {
      if (this.direction == this.LEFT) {
        this.x -= this.speedX;
      } else if (this.direction == this.RIGHT) {
        this.x += this.speedX;
      }
    }

    this.physics = function() {
      this.speedY += this.gravity;
      this.y += this.speedY;
      if (this.y + 50 >= 500) {
        this.y = 450;
        this.speedY = 0;
        this.isJumping = false;
      }
    }

    this.jump = function() {
      if (this.isJumping == false) {
        this.speedY = -10;
        this.isJumping = true;
      }
    }

    this.draw = function() {
      context.fillStyle = "#25a8ea";
      context.fillRect(this.x, this.y, 50, 50);
	  
	  if(this.isJumping==true){
		context.drawImage(this.currentSprite, 0, this.currentImagePos*this.subImageWidth, 
		this.currentImagePos*this.subImageHeight, 
		this.x, this.y, this.subImageWidth*2, this.subImageHeight*2);
	  }
    }
  }
</script>

</html>
